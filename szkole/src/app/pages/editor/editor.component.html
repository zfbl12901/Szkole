<div class="editor-container">
  <div class="editor-header">
    <h1>{{ isNewArticle() ? 'Nouvel article' : 'Modifier l\'article' }}</h1>
    <div class="header-actions">
      <label class="btn btn-secondary" title="Importer un fichier .md">
        <input 
          type="file" 
          accept=".md" 
          (change)="importFile($event)"
          style="display: none;"
        />
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        Importer
      </label>
      <button 
        class="btn btn-primary" 
        (click)="saveArticle()"
        [disabled]="isSaving()"
      >
        @if (isSaving()) {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="spinning">
            <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
          </svg>
          Enregistrement...
        } @else {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
            <polyline points="17 21 17 13 7 13 7 21"/>
            <polyline points="7 3 7 8 15 8"/>
          </svg>
          Enregistrer
        }
      </button>
    </div>
  </div>

  <div class="title-input-wrapper">
    <input 
      type="text" 
      class="title-input"
      [value]="articleTitle()"
      (input)="onTitleChange($any($event.target).value)"
      placeholder="Titre de l'article..."
    />
  </div>

  <div class="metadata-section">
    <div class="metadata-group">
      <label for="category">Catégorie</label>
      <input 
        id="category"
        type="text" 
        class="metadata-input"
        [value]="articleCategory()"
        (input)="articleCategory.set($any($event.target).value)"
        placeholder="Ex: Veille, Tutoriel, Documentation..."
      />
    </div>
    <div class="metadata-group">
      <label for="tags">Tags (séparés par des virgules)</label>
      <input 
        id="tags"
        type="text" 
        class="metadata-input"
        [value]="articleTags()"
        (input)="articleTags.set($any($event.target).value)"
        placeholder="Ex: angular, typescript, web..."
      />
    </div>
  </div>

  <div class="editor-wrapper">
    <div class="editor-pane">
      <div class="pane-header">Édition</div>
      <textarea 
        class="markdown-editor"
        [value]="markdownContent()"
        (input)="onContentChange($any($event.target).value)"
        placeholder="Commencez à rédiger votre article en Markdown..."
      ></textarea>
    </div>

    <div class="preview-pane">
      <div class="pane-header">Prévisualisation</div>
      <div class="markdown-preview" [innerHTML]="renderedHtml()"></div>
    </div>
  </div>
</div>

